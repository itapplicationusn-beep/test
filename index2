<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Groundwater GIS Dashboard (Deployable) - COMMENTED</title>
  <!-- Leaflet CSS: map rendering library -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <!-- Leaflet Draw CSS: drawing/editing tools -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css"/>
  <style>
    :root{--sidebar-width:360px;--gap:12px}
    html,body,#app{height:100%;margin:0;font-family:system-ui,Segoe UI,Roboto,Arial}
    /* simple 2-column layout: sidebar + map */
    #app{display:grid;grid-template-columns:var(--sidebar-width) 1fr;gap:var(--gap)}
    #sidebar{padding:12px;box-sizing:border-box;border-right:1px solid #e6e6e6;overflow:auto}
    #map{height:100vh;width:100%}
    body{margin:0}
    h2{margin:8px 0}
    .control-row{display:flex;gap:8px;align-items:center;margin-bottom:8px}
    .btn{padding:8px 10px;border-radius:6px;border:1px solid #ccc;background:#f7f7f7;cursor:pointer}
    .btn.primary{background:#2563eb;color:white;border-color:#1e40af}
    label{font-size:13px}
    input[type=range]{width:100%}
    .small{font-size:13px;color:#555}
    #chartContainer{height:200px}
    .legend-item{display:flex;align-items:center;gap:8px;margin:6px 0}
    .dot{width:14px;height:14px;border-radius:50%}
    .file-input{display:block}
    .row{display:flex;gap:8px}
    .flex-1{flex:1}
    .footer-note{font-size:12px;color:#666;margin-top:12px}
    .toggle{display:inline-flex;align-items:center;gap:6px}
    .search-results{max-height:120px;overflow:auto;border:1px solid #eee;padding:6px;border-radius:6px}
    @media(max-width:900px){#app{grid-template-columns:1fr}#sidebar{height:40vh;position:relative}}
  </style>
</head>
<body>

<!--
  COMMENTED SINGLE-FILE APP
  ------------------------------------------------------------------
  This document contains three sections:
  1) A fully-commented single-file web app (the actual index.html that you can deploy).
  2) A Mermaid architecture/flowchart diagram describing how data flows through the app.
  3) A professional multi-file project layout with separate file contents (index.html, css/style.css, js/app.js, data/data.json).

  You asked for: Option A (detailed comments), Option B (diagram), Option C (convert to multi-file).
  All three are included below. Save the top section as `index.html` to run immediately. Use the multi-file snippets to split into separate files.
  ------------------------------------------------------------------
-->

<div id="app">
  <div id="sidebar">
    <h2>Groundwater GIS Dashboard (COMMENTED)</h2>
    <div class="control-row">
      <button id="btnLocate" class="btn">My Location</button>
      <button id="btnClear" class="btn">Clear Drawings</button>
    </div>

    <h3>1) Data & Upload</h3>
    <div class="small">Upload CSV with header: name,lat,lng,ph,tds,date (date optional)</div>
    <input id="file" class="file-input" type="file" accept="text/csv,application/vnd.ms-excel,application/json" />
    <div style="margin-top:8px" class="row">
      <button id="btnLoadSample" class="btn">Load Sample</button>
      <button id="btnExport" class="btn">Export CSV</button>
    </div>

    <h3>2) Search</h3>
    <input id="searchBox" placeholder="Search by name..." style="width:100%;padding:8px;border-radius:6px;border:1px solid #ccc" />
    <div id="searchResults" class="search-results"></div>

    <h3>3) Filters</h3>
    <label>pH range <span id="phLabel" class="small">(any)</span></label>
    <div class="row">
      <input id="phMin" type="number" step="0.1" placeholder="min" style="width:100%" />
      <input id="phMax" type="number" step="0.1" placeholder="max" style="width:100%" />
    </div>

    <label style="margin-top:8px">TDS range (mg/L) <span id="tdsLabel" class="small">(any)</span></label>
    <div class="row">
      <input id="tdsMin" type="number" placeholder="min" style="width:100%" />
      <input id="tdsMax" type="number" placeholder="max" style="width:100%" />
    </div>
    <div style="margin-top:8px" class="row">
      <button id="btnApplyFilters" class="btn primary">Apply</button>
      <button id="btnResetFilters" class="btn">Reset</button>
    </div>

    <h3>4) Layers</h3>
    <div class="small">Base & WMS layers (toggle)</div>
    <div style="margin:8px 0">
      <label class="toggle"><input type="checkbox" id="cbImagery"/> World Imagery (ESRI)</label><br>
      <label class="toggle"><input type="checkbox" id="cbGIBS"/> NASA GIBS (VIIRS/Fire)</label><br>
      <label class="toggle"><input type="checkbox" id="cbBhuvan"/> Bhuvan WMS (example)</label>
    </div>

    <h3>5) Heatmap & Legend</h3>
    <label>Heatmap slider (radius)</label>
    <input id="heatRadius" type="range" min="5" max="50" value="25" />
    <div style="margin-top:8px">
      <button id="btnToggleHeat" class="btn">Toggle Heatmap</button>
    </div>
    <div style="margin-top:8px">
      <strong>Legend (pH)</strong>
      <div class="legend-item"><div class="dot" style="background:#2b8cbe"></div><div class="small">pH &lt; 6.5 (Acid)</div></div>
      <div class="legend-item"><div class="dot" style="background:#7fbf7b"></div><div class="small">6.5 ≤ pH ≤ 8.5 (Normal)</div></div>
      <div class="legend-item"><div class="dot" style="background:#fdae61"></div><div class="small">pH &gt; 8.5 (Alkaline)</div></div>
    </div>

    <h3>6) Charts</h3>
    <div id="chartContainer"><canvas id="chart"></canvas></div>

    <h3>7) Database / Save</h3>
    <div class="small">You can hook Firebase or Supabase. See the code comments for placeholders.</div>
    <div style="margin-top:8px" class="row">
      <button id="btnSaveFirebase" class="btn">Save to Firebase</button>
      <button id="btnSaveLocal" class="btn">Save Locally</button>
    </div>

    <div class="footer-note">Deploy: upload this single file to any web server. For Firebase save, add your Firebase config where indicated.</div>
  </div>

  <div id="map"></div>
</div>

<!-- External libraries (CDN) -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.heat/0.2.0/leaflet-heat.js"></script>
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.3.0/dist/chart.umd.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<!--
  COMMENTED JAVASCRIPT
  ------------------------------------------------------------------
  The code below is heavily commented to explain each block and line.
  Read the comments to understand how data flows: loading -> processing -> rendering -> interaction.
  ------------------------------------------------------------------
-->
<script>
// --------------------------
// MAP & LAYERS INITIALIZATION
// --------------------------
// Create map centered roughly over Uttarakhand and set zoom level
var map = L.map('map').setView([30.3165,78.0322],8);

// Add OpenStreetMap as the default basemap (tile layer)
var osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
  maxZoom:19,
  attribution:'© OpenStreetMap'
}).addTo(map); // addTo(map) means this layer is visible by default

// ESRI Imagery tile layer - kept ready to toggle on/off
var esriImagery = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}');

// NASA GIBS WMS endpoint (example) - another toggleable layer
var gibsLayer = L.tileLayer('https://gibs.earthdata.nasa.gov/wms/epsg3857/best/wms.cgi', {
  layers:'VIIRS_SNPP_DayNightBand_ENHANCED',
  format:'image/png',
  transparent:true,
  attribution:'NASA GIBS'
});

// Example Bhuvan WMS - this is an example endpoint: replace with working layer if needed
var bhuvanWms = L.tileLayer.wms('https://bhuvan.nrsc.gov.in/geoserver/bhuvan/wms', {
  layers:'bhuvan:WATERBODY_MANDATORY',
  format:'image/png',
  transparent:true,
  attribution:'Bhuvan (example)'
});

// Create layer groups to hold markers and drawn items
var markersLayer = L.layerGroup().addTo(map); // marker layer visible by default
var drawnItems = new L.FeatureGroup().addTo(map); // shapes drawn by user go here

// Heat layer initialized empty; it will be populated from data points
var heatLayer = L.heatLayer([], {radius:25,blur:15});
var heatOn = false; // track heatmap visibility state

// Add Leaflet.draw control so users can draw/edit features on the map
var drawControl = new L.Control.Draw({
  position:'topright',
  draw:{circle:false,marker:true,polyline:true,polygon:true,rectangle:true},
  edit:{featureGroup:drawnItems}
});
map.addControl(drawControl);

// When a new shape is created by the draw tool, add it to drawnItems group
map.on(L.Draw.Event.CREATED, function(e){
  var layer = e.layer; drawnItems.addLayer(layer);
});

// Clear drawings button: removes all user-drawn features
document.getElementById('btnClear').addEventListener('click', function(){ drawnItems.clearLayers(); });

// --------------------------
// SAMPLE DATA & STORAGE
// --------------------------
// A small sample dataset to allow the app to work out-of-the-box
var samplePoints = [
  {name:'Well A',lat:30.316, lng:78.032, ph:7.1, tds:320, date:'2025-11-20'},
  {name:'Well B',lat:30.5, lng:78.2, ph:6.4, tds:480, date:'2025-11-18'},
  {name:'Well C',lat:29.9, lng:78.1, ph:8.8, tds:210, date:'2025-11-21'},
  {name:'Well D',lat:30.2, lng:77.9, ph:7.8, tds:150, date:'2025-11-22'}
];
var allPoints = []; // Master list of points used by filters/search/render

// --------------------------
// UTILITY: Visual encoding
// --------------------------
// Simple function to pick marker color based on pH value
function colorByPH(p){
  if(p === null || p === undefined || isNaN(p)) return '#999';
  if(p < 6.5) return '#2b8cbe'; // acidic
  if(p <= 8.5) return '#7fbf7b'; // normal
  return '#fdae61'; // alkaline
}

// --------------------------
// RENDER POINTS (MARKERS + HEATMAP)
// --------------------------
// This function takes an array of point objects and draws them on the map
function renderPoints(points){
  // Clear previous markers
  markersLayer.clearLayers();
  // Clear heat data
  heatLayer.setLatLngs([]);

  points.forEach(p => {
    // Create a circleMarker (lightweight, styleable)
    var marker = L.circleMarker([p.lat,p.lng],{
      radius:8,
      fillOpacity:0.9,
      color:'#333',
      fillColor:colorByPH(p.ph)
    });

    // Attach a popup with basic details
    marker.bindPopup(`<b>${p.name || 'Point'}</b><br>pH: ${p.ph}<br>TDS: ${p.tds}<br>${p.date?('Date: '+p.date):''}`);

    // Save original data on marker for later reference
    marker.options.data = p;

    // Add marker to the markers layer group
    markersLayer.addLayer(marker);

    // Heat layer: include intensity as TDS (or fallback 1). heatLayer expects [lat,lng,intensity]
    heatLayer.addLatLng([p.lat,p.lng, p.tds || 1]);
  });

  // Refresh search results list and chart after rendering
  updateSearchResults(points);
  updateChart(points);
}

// --------------------------
// FILTERS (pH + TDS)
// --------------------------
function applyFilters(){
  var phMin = parseFloat(document.getElementById('phMin').value);
  var phMax = parseFloat(document.getElementById('phMax').value);
  var tdsMin = parseFloat(document.getElementById('tdsMin').value);
  var tdsMax = parseFloat(document.getElementById('tdsMax').value);

  // UX labels to show current filter values
  document.getElementById('phLabel').innerText = (isNaN(phMin)?'':'min '+phMin) + ' — ' + (isNaN(phMax)?'':'max '+phMax);
  document.getElementById('tdsLabel').innerText = (isNaN(tdsMin)?'':'min '+tdsMin) + ' — ' + (isNaN(tdsMax)?'':'max '+tdsMax);

  // Filter logic: return only points that satisfy all non-empty conditions
  var filtered = allPoints.filter(p => {
    if(!isNaN(phMin) && p.ph < phMin) return false;
    if(!isNaN(phMax) && p.ph > phMax) return false;
    if(!isNaN(tdsMin) && p.tds < tdsMin) return false;
    if(!isNaN(tdsMax) && p.tds > tdsMax) return false;
    return true;
  });

  // Render the filtered set
  renderPoints(filtered);
}

function resetFilters(){
  // Clear inputs and labels then show master dataset
  document.getElementById('phMin').value = '';
  document.getElementById('phMax').value = '';
  document.getElementById('tdsMin').value = '';
  document.getElementById('tdsMax').value = '';
  document.getElementById('phLabel').innerText='(any)';
  document.getElementById('tdsLabel').innerText='(any)';
  renderPoints(allPoints);
}

document.getElementById('btnApplyFilters').addEventListener('click', applyFilters);
document.getElementById('btnResetFilters').addEventListener('click', resetFilters);

// --------------------------
// SEARCH (client-side)
// --------------------------
var searchBox = document.getElementById('searchBox');
var searchResults = document.getElementById('searchResults');

// Update results as the user types
searchBox.addEventListener('input', function(){
  var q = this.value.trim().toLowerCase();
  if(!q){ updateSearchResults(allPoints); return; }
  var results = allPoints.filter(p => (p.name||'').toLowerCase().includes(q));
  updateSearchResults(results);
});

// Renders clickable search results (click centers the map on the point)
function updateSearchResults(points){
  searchResults.innerHTML = '';
  if(!points || points.length === 0){ searchResults.innerHTML = '<div class="small">No results</div>'; return; }
  points.slice(0,200).forEach(p => {
    var div = document.createElement('div'); div.className='small'; div.style.padding='6px'; div.style.cursor='pointer';
    div.innerHTML = `<b>${p.name||'Point'}</b> <span style="color:#666">(pH:${p.ph}, TDS:${p.tds})</span>`;
    div.onclick = function(){ map.setView([p.lat,p.lng],14); }
    searchResults.appendChild(div);
  });
}

// --------------------------
// HEATMAP CONTROLS
// --------------------------
var heatRadius = document.getElementById('heatRadius');
// Change radius on slider input
heatRadius.addEventListener('input', function(){ heatLayer.setOptions({radius: parseInt(this.value)}); });

// Toggle heatmap visibility
document.getElementById('btnToggleHeat').addEventListener('click', function(){
  heatOn = !heatOn;
  if(heatOn) heatLayer.addTo(map); else map.removeLayer(heatLayer);
  this.innerText = heatOn? 'Hide Heatmap':'Show Heatmap';
});

// --------------------------
// FILE UPLOAD: CSV or JSON (PapaParse)
// --------------------------
document.getElementById('file').addEventListener('change', function(e){
  var f = e.target.files[0]; if(!f) return;
  var name = f.name.toLowerCase();

  // CSV parsing path
  if(name.endsWith('.csv') || name.endsWith('.txt')){
    Papa.parse(f, {header:true,skipEmptyLines:true,complete:function(res){
      // Map CSV columns to fields the app expects. The code attempts several common header variations.
      var rows = res.data.map(r => ({
        name:r.name||r.Name||r.id||'Point',
        lat:parseFloat(r.lat||r.Lat||r.latitude),
        lng:parseFloat(r.lng||r.Lng||r.longitude),
        ph:parseFloat(r.ph||r.pH||r.ph_value),
        tds:parseFloat(r.tds||r.TDS),
        date:r.date||r.Date
      })).filter(x=>!isNaN(x.lat) && !isNaN(x.lng));

      // Append to master dataset and render
      allPoints = allPoints.concat(rows);
      renderPoints(allPoints);
    }});

  // JSON parsing path
  } else if(name.endsWith('.json')){
    var reader = new FileReader(); reader.onload = function(){
      try{ var js = JSON.parse(reader.result); allPoints = allPoints.concat(js); renderPoints(allPoints); }catch(err){alert('Invalid JSON');}
    }; reader.readAsText(f);
  } else alert('Unsupported file type');
});

// --------------------------
// EXPORT (CSV)
// --------------------------
document.getElementById('btnExport').addEventListener('click', function(){
  if(allPoints.length===0){ alert('No data to export'); return; }
  // Build CSV string (simple, does not escape commas in names)
  var csv = 'name,lat,lng,ph,tds,date\n' + allPoints.map(p=>`${(p.name||'').replace(/,/g,' ')} , ${p.lat}, ${p.lng}, ${p.ph||''}, ${p.tds||''}, ${p.date||''}`).join('\n');
  var blob = new Blob([csv], {type:'text/csv;charset=utf-8;'});
  var url = URL.createObjectURL(blob); var a = document.createElement('a'); a.href = url; a.download = 'groundwater_export.csv'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
});

// --------------------------
// CHART (Chart.js)
// --------------------------
var chartCtx = document.getElementById('chart').getContext('2d');
var chart = new Chart(chartCtx, {
  type:'bar',
  data:{labels:[],datasets:[{label:'TDS (mg/L)',data:[],yAxisID:'y'},{label:'pH',data:[],yAxisID:'y1'}]},
  options:{responsive:true,interaction:{mode:'index'},scales:{y:{type:'linear',position:'left'},y1:{type:'linear',position:'right',grid:{display:false}}}}
});

function updateChart(points){
  // Simple chart: x-axis = point names, left y = TDS, right y = pH
  var labels = points.map(p=>p.name||'P');
  chart.data.labels = labels;
  chart.data.datasets[0].data = points.map(p=>p.tds||0);
  chart.data.datasets[1].data = points.map(p=>p.ph||0);
  chart.update();
}

// --------------------------
// FIREBASE (placeholder)
// --------------------------
// This block is intentionally disabled. To enable:
// 1) Create a Firebase project
// 2) Enable Realtime Database (or Firestore) and set rules
// 3) Paste your firebaseConfig object below and set firebaseEnabled = true
var firebaseEnabled = false; // change to true if you add config
/* Example config format:
var firebaseConfig = {
  apiKey: "XXX",
  authDomain: "XXX",
  databaseURL: "https://YOUR-PROJECT.firebaseio.com",
  projectId: "YOUR-PROJECT",
  storageBucket: "YOUR-PROJECT.appspot.com",
  messagingSenderId: "...",
  appId: "..."
};
firebase.initializeApp(firebaseConfig);
var db = firebase.database();
*/

// When user clicks Save to Firebase, example write code (disabled until firebaseEnabled true)
document.getElementById('btnSaveFirebase').addEventListener('click', function(){
  if(!firebaseEnabled){ alert('Firebase not configured. See code comments to add your Firebase config.'); return; }
  allPoints.forEach(p=>{ var ref = db.ref('groundwater').push(); ref.set(p); });
  alert('Saved to Firebase');
});

// Save locally using browser localStorage
document.getElementById('btnSaveLocal').addEventListener('click', function(){
  localStorage.setItem('groundwater_data', JSON.stringify(allPoints)); alert('Saved locally (browser)');
});

// --------------------------
// GEOLOCATION BUTTON
// --------------------------
document.getElementById('btnLocate').addEventListener('click', function(){
  if(navigator.geolocation){ navigator.geolocation.getCurrentPosition(function(pos){ map.setView([pos.coords.latitude,pos.coords.longitude],13); }, function(){ alert('Unable to retrieve location.'); }); } else alert('Geolocation not supported');
});

// --------------------------
// LAYER TOGGLES
// --------------------------
// Checkbox toggles in the sidebar add/remove overlay layers from the map
document.getElementById('cbImagery').addEventListener('change', function(){ if(this.checked) esriImagery.addTo(map); else map.removeLayer(esriImagery); });
document.getElementById('cbGIBS').addEventListener('change', function(){ if(this.checked) gibsLayer.addTo(map); else map.removeLayer(gibsLayer); });
document.getElementById('cbBhuvan').addEventListener('change', function(){ if(this.checked) bhuvanWms.addTo(map); else map.removeLayer(bhuvanWms); });

// --------------------------
// QUICK ADD: right-click on map to add a new sample point
// --------------------------
// This is a convenience: right-click (contextmenu) to add a point with prompts
map.on('contextmenu', function(e){
  var name = prompt('Name for new point (right-click added)'); if(!name) return;
  var ph = parseFloat(prompt('pH value (e.g., 7.2)')); var tds = parseFloat(prompt('TDS mg/L (e.g., 320)'));
  var p = {name:name,lat:e.latlng.lat,lng:e.latlng.lng,ph:isNaN(ph)?null:ph,tds:isNaN(tds)?null:tds,date:new Date().toISOString().slice(0,10)};
  allPoints.push(p); renderPoints(allPoints);
});

// --------------------------
// INITIALIZATION: load saved data from localStorage or use sample
// --------------------------
var saved = localStorage.getItem('groundwater_data');
if(saved){ try{ allPoints = JSON.parse(saved); renderPoints(allPoints); }catch(e){ allPoints = samplePoints.slice(); renderPoints(allPoints); }} else { allPoints = samplePoints.slice(); renderPoints(allPoints); }

// Optional: clicking a marker will open its popup (markersLayer handles event)
markersLayer.on('click', function(e){ if(e.layer && e.layer.openPopup) e.layer.openPopup(); });

// --------------------------
// END OF COMMENTED SCRIPT
// --------------------------
</script>

<!--
  ------------------------------------------------------------------
  SECTION: Mermaid diagram (architecture + data flow)
  ------------------------------------------------------------------
  Below is a Mermaid diagram that visually explains the app's components and how data flows.
  You can copy this block into any Mermaid renderer (e.g., GitHub README.md or mermaid.live) to view.
-->

<!-- mermaid
flowchart TD
  A[User Browser] -->|Requests index.html| B(Web Server / GitHub Pages)
  B -->|Serves| A
  A -->|Loads Libraries| C{Leaflet, PapaParse, Chart.js, Firebase SDK}
  A -->|Loads Data| D[data.json or uploaded CSV / localStorage]
  C --> E[Map UI]
  D --> E
  E --> F[Markers Layer]
  E --> G[Heatmap Layer]
  E --> H[Draw / Edit Layer]
  E --> I[Chart Panel]
  E --> J[Search & Filters]
  J --> E
  subgraph Optional
    K[Firebase / Supabase]
    L[WMS/Tile services (Bhuvan / NASA / ESRI)]
  end
  E -->|push| K
  E -->|request| L
end
-->

<!--
  ------------------------------------------------------------------
  SECTION: Multi-file project layout (recommended for production)
  ------------------------------------------------------------------
  Below are recommended files with their contents. Create a folder with this structure and copy each snippet into the corresponding file.
-->

<!--
  Project structure:
  groundwater-gis-app/
    ├─ index.html        (lightweight shell that loads css/js)
    ├─ css/
    │   └─ style.css
    ├─ js/
    │   └─ app.js
    ├─ data/
    │   └─ data.json
    └─ README.md
-->

<!--
  ===== index.html (multi-file version) =====
  Save this as /index.html and it will load external CSS/JS from /css/style.css and /js/app.js
-->

<!--
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Groundwater GIS - Multi-file</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css">
</head>
<body>
  <div id="app">
    <!-- sidebar + map markup same as single-file -->
  </div>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.heat/0.2.0/leaflet-heat.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.3.0/dist/chart.umd.min.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
-->

<!--
  ===== css/style.css =====
-->

/*
Paste the CSS from the top of this file into css/style.css
(controls layout, spacing, responsive behavior)
*/

/* Example minimal CSS snippet to include in css/style.css - copy the block from the single-file head */

/* (omitted here to avoid duplication) */

<!--
  ===== js/app.js =====
-->

// Copy the entire JavaScript portion from the single-file app (between <script> ... </script>) into js/app.js
// At the top, remove the <script> tags. Ensure DOM is ready or wrap in DOMContentLoaded if needed.

/* Example wrapper:
document.addEventListener('DOMContentLoaded', function(){
  // paste the JS here (map init, layers, handlers...)
});
*/

<!--
  ===== data/data.json =====
-->

/* Example data.json content (same as samplePoints):
[
  {"name":"Well A","lat":30.316,"lng":78.032,"ph":7.1,"tds":320,"date":"2025-11-20"},
  {"name":"Well B","lat":30.5,"lng":78.2,"ph":6.4,"tds":480,"date":"2025-11-18"}
]
*/

<!--
  -----------------------------
  Quick notes on splitting files and deploying to GitHub Pages:
  -----------------------------
  1) Keep paths relative: index.html should reference css/style.css and js/app.js using relative URLs.
  2) If you're using external services (WMS), some endpoints may block requests from GitHub Pages due to CORS. Use a CORS-friendly tile endpoint or host a proxy if necessary.
  3) For Firebase, put your config inside js/app.js (or a secure server) — do NOT commit private server keys to public repos unless they are meant to be public and have appropriate database rules.
  4) Test locally using a simple server (python -m http.server) before pushing to GitHub.

  -----------------------------
  That's it — the single file above is fully commented. The Mermaid diagram and multi-file snippets are included for your convenience.
-->
</body>
</html>
